# æœåŠ¡å™¨ AI ä¿®å¤å®Œæ•´æ­¥éª¤

## ğŸ” é—®é¢˜è¯Šæ–­
ä»æ—¥å¿—çœ‹ï¼Œæœ€æ–°çš„é”™è¯¯æ˜¯ 12æœˆ26æ—¥çš„ï¼Œä½†ç”¨æˆ·è¯´è¿˜æœ‰é—®é¢˜ã€‚éœ€è¦ï¼š
1. ç¡®è®¤ deepseekClient.js æ–‡ä»¶å·²æ›´æ–°
2. æµ‹è¯• API è°ƒç”¨æ˜¯å¦æ­£å¸¸

## ğŸš€ ä¿®å¤æ­¥éª¤

### 1. æ£€æŸ¥ deepseekClient.js æ–‡ä»¶
```bash
cd /var/www/activities_management/backend
head -15 utils/deepseekClient.js
```

### 2. å¦‚æœæ–‡ä»¶è¿˜æ˜¯æ—§ç‰ˆæœ¬ï¼ˆæœ‰ç¡¬ç¼–ç çš„ API keyï¼‰ï¼Œéœ€è¦æ›´æ–°

#### æ–¹æ³• Aï¼šä» Git æ‹‰å–æœ€æ–°ä»£ç 
```bash
cd /var/www/activities_management
git pull origin main
cd backend
pm2 restart all --update-env
```

#### æ–¹æ³• Bï¼šç›´æ¥ç¼–è¾‘æ–‡ä»¶
```bash
cd /var/www/activities_management/backend
nano utils/deepseekClient.js
```

å°†ç¬¬ 7-10 è¡Œæ”¹ä¸ºï¼š
```javascript
// ä»ç¯å¢ƒå˜é‡è¯»å– API Key
const apiKey = process.env.DEEPSEEK_API_KEY;
if (apiKey) {
  console.log('[DeepSeek] è¯»å–åˆ°çš„ API Key:', `${apiKey.substring(0, 4)}...${apiKey.substring(apiKey.length - 4)}`);
} else {
  console.error('âš ï¸  è­¦å‘Š: DEEPSEEK_API_KEY æœªé…ç½®ï¼ŒAI åŠŸèƒ½å°†æ— æ³•ä½¿ç”¨');
}

const openai = new OpenAI({
  baseURL: "https://api.deepseek.com",
  apiKey: apiKey || "", // ä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œå¦‚æœæœªé…ç½®åˆ™ä¸ºç©ºå­—ç¬¦ä¸²
});
```

ä¿å­˜åé‡å¯ï¼š
```bash
pm2 restart all --update-env
```

### 3. æµ‹è¯• AI èŠå¤© API
```bash
curl -X POST http://localhost:3000/api/chat/ask \
  -H "Content-Type: application/json" \
  -d '{
    "sessionId": "test123",
    "userMessage": "ä½ å¥½"
  }'
```

### 4. æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
pm2 logs activities-backend
```

## âœ… éªŒè¯
- æµ‹è¯•æ™ºèƒ½åŠ©æ‰‹åŠŸèƒ½
- æŸ¥çœ‹æ˜¯å¦æœ‰æ–°çš„é”™è¯¯æ—¥å¿—
- ç¡®è®¤ API è°ƒç”¨æˆåŠŸ

