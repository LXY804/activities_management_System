# æœåŠ¡å™¨æ¢å¤å¹¶æ­£ç¡®ä¿®å¤

## ğŸš¨ é—®é¢˜ï¼šsed å‘½ä»¤æŠŠ __dirname é”™è¯¯æ›¿æ¢äº†

## ğŸ”„ 1. ä» Git æ¢å¤æ–‡ä»¶ï¼ˆæœ€å¿«æœ€å®‰å…¨ï¼‰
```bash
cd /var/www/activities_management
git checkout HEAD -- backend/controllers/giftController.js
pm2 restart all --update-env
```

## ğŸ”§ 2. å¦‚æœ Git æ¢å¤å¤±è´¥ï¼Œæ‰‹åŠ¨ä¿®å¤è¯­æ³•é”™è¯¯
```bash
cd /var/www/activities_management/backend/controllers
# ä¿®å¤ __dirname é”™è¯¯
sed -i 's/__dirtitle AS name/__dirname/g' giftController.js
pm2 restart all --update-env
```

## âœ… 3. éªŒè¯æœåŠ¡å¯åŠ¨
```bash
pm2 status
pm2 logs activities-backend --lines 10
```

## ğŸ¯ 4. æ­£ç¡®ä¿®å¤åˆ é™¤åŠŸèƒ½ï¼ˆåªä¿®å¤åˆ é™¤å‡½æ•°ï¼Œä¸å½±å“å…¶ä»–ä»£ç ï¼‰

### æ–¹æ³•Aï¼šä½¿ç”¨ Git æ‹‰å–æœ€æ–°ä»£ç ï¼ˆæ¨èï¼‰
```bash
cd /var/www/activities_management
git fetch origin
git reset --hard origin/main
pm2 restart all --update-env
```

### æ–¹æ³•Bï¼šåªä¿®å¤åˆ é™¤å‡½æ•°çš„å…³é”®è¡Œ
```bash
cd /var/www/activities_management/backend/controllers
# åªä¿®å¤åˆ é™¤å‡½æ•°ä¸­çš„è¡¨åï¼ˆç²¾ç¡®æ›¿æ¢ï¼‰
sed -i '236s/FROM gifts WHERE gift_id/FROM gift_items WHERE gift_id/' giftController.js
sed -i '241s/FROM gifts WHERE gift_id/FROM gift_items WHERE gift_id/' giftController.js
sed -i '268s/DELETE FROM gifts/DELETE FROM gift_items/' giftController.js
pm2 restart all --update-env
```

