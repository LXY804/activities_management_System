# 部署检查清单

使用此清单确保所有部署步骤都已完成。

## 📋 服务器环境

- [ ] 操作系统已更新到最新版本
- [ ] Node.js >= 20.19.0 已安装
- [ ] npm 已安装
- [ ] MySQL >= 5.7 已安装并运行
- [ ] Nginx 已安装并运行
- [ ] PM2 已全局安装

## 📋 数据库配置

- [ ] MySQL 数据库已创建
- [ ] 数据库用户已创建并授权
- [ ] 数据库 SQL 文件已导入
- [ ] 数据库连接测试通过

## 📋 后端配置

- [ ] 项目文件已上传到服务器
- [ ] 后端依赖已安装 (`npm install --production`)
- [ ] `.env` 文件已创建并配置
- [ ] 数据库配置正确（DB_HOST, DB_USER, DB_PASSWORD, DB_NAME）
- [ ] JWT_SECRET 已设置为强随机字符串
- [ ] CORS_ORIGIN 已设置为生产域名
- [ ] PORT 配置正确
- [ ] NODE_ENV 设置为 production
- [ ] `uploads` 目录已创建并设置权限
- [ ] PM2 配置文件已创建
- [ ] 后端服务已通过 PM2 启动
- [ ] 后端健康检查通过 (`curl http://localhost:3000/api/health`)

## 📋 前端配置

- [ ] 前端依赖已安装 (`npm install`)
- [ ] `.env.production` 文件已创建
- [ ] `VITE_API_BASE_URL` 已设置为生产 API 地址
- [ ] 前端项目已构建 (`npm run build`)
- [ ] `dist` 目录已生成

## 📋 Nginx 配置

- [ ] Nginx 配置文件已创建
- [ ] `server_name` 已设置为实际域名
- [ ] `root` 路径指向前端 `dist` 目录
- [ ] API 代理配置正确 (`/api` -> `http://localhost:3000`)
- [ ] WebSocket 代理配置正确 (`/ws` -> `http://localhost:3000`)
- [ ] 上传文件代理配置正确 (`/uploads` -> `http://localhost:3000`)
- [ ] Nginx 配置测试通过 (`sudo nginx -t`)
- [ ] Nginx 已重载

## 📋 域名和 DNS

- [ ] 域名已购买
- [ ] DNS A 记录已指向服务器 IP
- [ ] 域名解析已生效（可使用 `ping yourdomain.com` 测试）

## 📋 防火墙

- [ ] 防火墙已配置
- [ ] 端口 80 (HTTP) 已开放
- [ ] 端口 443 (HTTPS) 已开放
- [ ] 端口 22 (SSH) 已开放
- [ ] 端口 3000 未对外开放（仅本地访问）

## 📋 HTTPS（可选但推荐）

- [ ] Certbot 已安装
- [ ] SSL 证书已获取
- [ ] Nginx HTTPS 配置已生效
- [ ] HTTP 自动重定向到 HTTPS
- [ ] SSL 证书自动续期已配置

## 📋 功能测试

- [ ] 前端页面可以正常访问
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] API 请求正常
- [ ] 文件上传功能正常
- [ ] WebSocket 聊天功能正常（如适用）
- [ ] 数据库读写正常

## 📋 安全和优化

- [ ] 所有密码已设置为强密码
- [ ] `.env` 文件权限已设置为 600
- [ ] 定期备份计划已设置
- [ ] PM2 开机自启已配置
- [ ] 日志监控已设置
- [ ] 系统资源监控已设置

## 📋 文档

- [ ] 部署文档已阅读
- [ ] 所有配置已记录
- [ ] 备份恢复流程已了解

---

## 🚀 快速验证命令

```bash
# 检查后端
pm2 status
curl http://localhost:3000/api/health

# 检查前端
ls -la /var/www/activities_management/校园活动管理系统/dist

# 检查 Nginx
sudo nginx -t
sudo systemctl status nginx

# 检查数据库
mysql -u campus_user -p campus_activities -e "SHOW TABLES;"

# 检查防火墙
sudo ufw status  # Ubuntu/Debian
sudo firewall-cmd --list-all  # CentOS
```

---

完成所有检查项后，你的系统应该可以正常运行了！🎉


